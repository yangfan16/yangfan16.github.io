<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/uploads/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon-16x16.png"><link rel="mask-icon" href="/uploads/safari-pinned-tab.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.yangfan16.cn",root:"/",scheme:"Mist",version:"7.8.0",exturl:!1,sidebar:{position:"right",display:"hide",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!0,comments:{style:"buttons",active:"gitalk",storage:!0,lazyload:!1,nav:null,activeClass:"gitalk"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="æœ€è¿‘æŠŠè‡ªå·±çš„è™šæ‹Ÿæœºå‡çº§åˆ°äº†CetnOS 8,å†…æ ¸ç‰ˆæœ¬4.18.0-147.8.1.el8_1.x86_64ï¼Œæ„Ÿè§‰å¸¦æ¥çš„å˜åŒ–è¿˜æ˜¯å¾ˆå¤§ï¼Œç½‘ç»œç®¡ç†å½»åº•æ›¿æ¢äº† network.serviceï¼Œé˜²ç«å¢™ç®¡ç†ç­‰ç­‰ã€‚å±…ç„¶è¿˜å»Dockerï¼Œå¼•è¿›äº†æ–°ä¸€ä»£çš„å®¹å™¨ç®¡ç†å·¥å…·ï¼ˆğŸ˜¢ å›½å†…å¾ˆå¤šå¼€å‘éƒ½è¿˜æ²¡ç”¨dockerï¼Œå°±å·²ç»å»dockeräº†ï¼‰,ä½¿ç”¨ Podmanã€Buildah(æä¾›æ„å»ºimageçš„èƒ½åŠ›)ã€Skopeo(æä¾›"><meta property="og:type" content="article"><meta property="og:title" content="Podman åˆä½“éªŒ"><meta property="og:url" content="https://blog.yangfan16.cn/others/podman-experience/index.html"><meta property="og:site_name" content="é’æ¢…æ¢¦å‘“"><meta property="og:description" content="æœ€è¿‘æŠŠè‡ªå·±çš„è™šæ‹Ÿæœºå‡çº§åˆ°äº†CetnOS 8,å†…æ ¸ç‰ˆæœ¬4.18.0-147.8.1.el8_1.x86_64ï¼Œæ„Ÿè§‰å¸¦æ¥çš„å˜åŒ–è¿˜æ˜¯å¾ˆå¤§ï¼Œç½‘ç»œç®¡ç†å½»åº•æ›¿æ¢äº† network.serviceï¼Œé˜²ç«å¢™ç®¡ç†ç­‰ç­‰ã€‚å±…ç„¶è¿˜å»Dockerï¼Œå¼•è¿›äº†æ–°ä¸€ä»£çš„å®¹å™¨ç®¡ç†å·¥å…·ï¼ˆğŸ˜¢ å›½å†…å¾ˆå¤šå¼€å‘éƒ½è¿˜æ²¡ç”¨dockerï¼Œå°±å·²ç»å»dockeräº†ï¼‰,ä½¿ç”¨ Podmanã€Buildah(æä¾›æ„å»ºimageçš„èƒ½åŠ›)ã€Skopeo(æä¾›"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://images.yangfan16.cn/podman-pod.jpeg"><meta property="article:published_time" content="2020-05-04T06:09:14.000Z"><meta property="article:modified_time" content="2020-06-02T14:41:26.628Z"><meta property="article:author" content="é’æ¢…ç…®é©¬"><meta property="article:tag" content="docker"><meta property="article:tag" content="podman"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://images.yangfan16.cn/podman-pod.jpeg"><link rel="canonical" href="https://blog.yangfan16.cn/others/podman-experience/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Podman åˆä½“éªŒ | é’æ¢…æ¢¦å‘“</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">é’æ¢…æ¢¦å‘“</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">å’Œä¸–ç•Œäº¤æ‰‹çš„è¿™è®¸å¤šå¹´ï¼Œä½ æ˜¯å¦å…‰å½©ä¾æ—§ï¼Œå…´è‡´ç›ç„¶</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i> é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i> å½’æ¡£</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i> æ ‡ç­¾</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i> å…³äº</a></li></ul></nav></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/yangfan16" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.yangfan16.cn/others/podman-experience/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.png"><meta itemprop="name" content="é’æ¢…ç…®é©¬"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="é’æ¢…æ¢¦å‘“"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Podman åˆä½“éªŒ</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-04 14:09:14" itemprop="dateCreated datePublished" datetime="2020-05-04T14:09:14+08:00">2020-05-04</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/others/" itemprop="url" rel="index"><span itemprop="name">others</span></a></span></span><br><span class="post-meta-item" title="æœ¬æ–‡å­—æ•°"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span> <span>13k</span></span><span class="post-meta-item" title="é˜…è¯»æ—¶é•¿"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span> <span>11 åˆ†é’Ÿ</span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>æœ€è¿‘æŠŠè‡ªå·±çš„è™šæ‹Ÿæœºå‡çº§åˆ°äº†CetnOS 8,å†…æ ¸ç‰ˆæœ¬4.18.0-147.8.1.el8_1.x86_64ï¼Œæ„Ÿè§‰å¸¦æ¥çš„å˜åŒ–è¿˜æ˜¯å¾ˆå¤§ï¼Œç½‘ç»œç®¡ç†å½»åº•æ›¿æ¢äº† network.serviceï¼Œé˜²ç«å¢™ç®¡ç†ç­‰ç­‰ã€‚å±…ç„¶è¿˜å»Dockerï¼Œå¼•è¿›äº†æ–°ä¸€ä»£çš„å®¹å™¨ç®¡ç†å·¥å…·ï¼ˆğŸ˜¢ å›½å†…å¾ˆå¤šå¼€å‘éƒ½è¿˜æ²¡ç”¨dockerï¼Œå°±å·²ç»å»dockeräº†ï¼‰,ä½¿ç”¨ Podmanã€Buildah(æä¾›æ„å»ºimageçš„èƒ½åŠ›)ã€Skopeo(æä¾›è¿œç¨‹ä»“åº“çš„é•œåƒç®¡ç†èƒ½åŠ›) ,å¯¹dockerè¿›è¡Œäº†æ›¿æ¢ã€‚ æˆ‘ä½“éªŒäº†ä¸‹ Podman,è°¨åšå°æ–‡ä»¥è®°ã€‚</p></blockquote><a id="more"></a><h3 id="ä¸ºå•¥ä¸ç”¨Docker"><a href="#ä¸ºå•¥ä¸ç”¨Docker" class="headerlink" title="ä¸ºå•¥ä¸ç”¨Docker"></a>ä¸ºå•¥ä¸ç”¨Docker</h3><p>æˆ‘è§‰å¾—ä¸»è¦æ˜¯å› ä¸ºdockeréœ€è¦è¿è¡Œä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œdockerçš„ç¨³å®šæ€§é—®é¢˜ï¼ˆæ„Ÿè§‰åœ¨å‘å¥½çš„è¶‹åŠ¿ä¸æ–­å‘å±•ï¼Œå…¶å®è¿œæ¯”podmanç¨³å®šå¤šäº†ï¼‰ï¼Œè¿˜æœ‰çš„è¯å°±æ˜¯rootè¿è¡Œã€‚éšç€K8SæŠ›å¼ƒCRIæ ‡å‡†ï¼ŒCRI-Oè¿›å…¥CNCFå­µåŒ–é˜¶æ®µ,å›½å¤–è¶Šæ¥è¶Šå¤šçš„åœ¨ä½¿ç”¨CRI-O æ¥æ›¿ä»£Docker,Dockeræ­£åœ¨è¢«å¤§å®¶æŠ›å¼ƒ (:â€“</p><h3 id="podmanç‰¹è‰²"><a href="#podmanç‰¹è‰²" class="headerlink" title="podmanç‰¹è‰²"></a>podmanç‰¹è‰²</h3><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>podmanåˆ›å»ºå®¹å™¨ä¸éœ€è¦å®ˆæŠ¤è¿›ç¨‹ï¼Œå¯ä»¥ç”¨æ™®é€šç”¨æˆ·åˆ›å»ºå®¹å™¨ã€‚podmançš„å‘½ä»¤æ–¹å¼ä¸dockeræ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ï¼Œå¯ä»¥è®¤ä¸º alias docker=podmanï¼Œä¼šç”¨dockerå°±ä¼šç”¨podmanã€‚</p><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>æœ‰ä¸€ä¸ªpodman-compose(ä½†æ˜¯è¿˜æ²¡æœ‰release1.0)ï¼Œä¸æ˜¯å¾ˆå¥½ç”¨ã€‚ä¸docker-composeè¿˜æœ‰å¾ˆå¤§çš„å·®è·ã€‚</li><li>æ›´æ–°é¢‘ç¹(ä½ æ°¸è¿œä¸çŸ¥é“è¿™ä¸ªé”…æ˜¯ä½ çš„é—®é¢˜è¿˜æ˜¯podmançš„é—®é¢˜ï¼Œå¿ƒç´¯)</li></ul><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>CenOS8é»˜è®¤å°±æ˜¯podmanï¼Œdockerå®‰è£…åå€’æ˜¯éœ€è¦å»å®‰è£…ä»“åº“æºã€‚ ç›´æ¥è¿è¡Œ<code>sudo yum install podman -y</code>å°±è¡Œ</p><p><code>yum info podman</code> èƒ½çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">åç§°         : podman</span><br><span class="line">ç‰ˆæœ¬         : 1.6.4</span><br><span class="line">å‘å¸ƒ         : 4.module_el8.1.0+298+41f9343a</span><br><span class="line">æ¶æ„         : x86_64</span><br><span class="line">å¤§å°         : 55 M</span><br><span class="line">æº           : podman-1.6.4-4.module_el8.1.0+298+41f9343a.src.rpm</span><br><span class="line">ä»“åº“         : @System</span><br><span class="line">æ¥è‡ªä»“åº“     : AppStream</span><br><span class="line">æ¦‚å†µ         : Manage Pods, Containers and Container Images</span><br><span class="line">URL          : https://podman.io/</span><br><span class="line">åè®®         : ASL 2.0</span><br><span class="line">æè¿°         : podman (Pod Manager) is a fully featured container engine that is a simple daemonless tool.  podman provides a Docker-CLI</span><br><span class="line">             : comparable command line that eases the transition from other container engines and allows the management of pods, containers and</span><br><span class="line">             : images.  Simply put: alias docker=podman.  Most podman commands can be run as a regular user, without requiring additional</span><br><span class="line">             : privileges.</span><br><span class="line">             :</span><br><span class="line">             : podman uses Buildah(1) internally to create container images. Both tools share image (not container) storage, hence each can use</span><br><span class="line">             : or manipulate images (but not containers) created by the other.</span><br><span class="line">             :</span><br><span class="line">             : Manage Pods, Containers and Container Images</span><br><span class="line">             : libpod Simple management tool for pods, containers and images</span><br></pre></td></tr></table></figure><h3 id="é…ç½®è¯´æ˜"><a href="#é…ç½®è¯´æ˜" class="headerlink" title="é…ç½®è¯´æ˜"></a>é…ç½®è¯´æ˜</h3><h4 id="podman-rpmä¸­é™„å¸¦çš„æ–‡ä»¶"><a href="#podman-rpmä¸­é™„å¸¦çš„æ–‡ä»¶" class="headerlink" title="podman rpmä¸­é™„å¸¦çš„æ–‡ä»¶"></a>podman rpmä¸­é™„å¸¦çš„æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> rpm -ql podman | grep -v <span class="string">"/usr/share/doc/"</span></span></span><br><span class="line">/etc/cni/net.d/87-podman-bridge.conflist</span><br><span class="line">/usr/bin/podman</span><br><span class="line">/usr/lib/.build-id</span><br><span class="line">/usr/lib/.build-id/82</span><br><span class="line">/usr/lib/.build-id/82/21ca637b743ef63235a38b3195f6563a96967a</span><br><span class="line">/usr/lib/systemd/system/io.podman.service</span><br><span class="line">/usr/lib/systemd/system/io.podman.socket</span><br><span class="line">/usr/lib/systemd/user/io.podman.service</span><br><span class="line">/usr/lib/systemd/user/io.podman.socket</span><br><span class="line">/usr/lib/tmpfiles.d/podman.conf</span><br><span class="line">/usr/share/bash-completion/completions/podman</span><br><span class="line">/usr/share/containers/libpod.conf</span><br><span class="line">/usr/share/licenses/podman</span><br><span class="line">/usr/share/licenses/podman/LICENSE</span><br><span class="line">/usr/share/man/man5/oci-hooks.5.gz</span><br><span class="line">/usr/share/zsh/site-functions</span><br><span class="line">/usr/share/zsh/site-functions/_podman</span><br></pre></td></tr></table></figure><p>èƒ½çœ‹åˆ°çš„åªæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå°±åœ¨<code>/etc/cni/net.d/</code>ä¸‹é¢,ä¸Bridgeçš„é…ç½®æœ‰å…³,æ‰“å¼€çœ‹çœ‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ cat &#x2F;etc&#x2F;cni&#x2F;net.d&#x2F;87-podman-bridge.conflist</span><br><span class="line">&#123;</span><br><span class="line">  &quot;cniVersion&quot;: &quot;0.4.0&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;podman&quot;,</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;bridge&quot;,</span><br><span class="line">      &quot;bridge&quot;: &quot;cni-podman0&quot;,</span><br><span class="line">      &quot;isGateway&quot;: true,</span><br><span class="line">      &quot;ipMasq&quot;: true,</span><br><span class="line">      &quot;ipam&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;host-local&quot;,</span><br><span class="line">        &quot;routes&quot;: [&#123; &quot;dst&quot;: &quot;0.0.0.0&#x2F;0&quot; &#125;],</span><br><span class="line">        &quot;ranges&quot;: [</span><br><span class="line">          [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;subnet&quot;: &quot;10.88.0.0&#x2F;16&quot;,</span><br><span class="line">              &quot;gateway&quot;: &quot;10.88.0.1&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;portmap&quot;,</span><br><span class="line">      &quot;capabilities&quot;: &#123;</span><br><span class="line">        &quot;portMappings&quot;: true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;tuning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶è€Œå®‰è£…çš„æ—¶å€™ï¼Œèƒ½çœ‹åˆ°éœ€è¦çš„ä¸€ä¸ªé‡è¦ä¾èµ–å°±æ˜¯containers-commonï¼Œè¿™ä¸ªé‡Œé¢æœ‰å¾ˆå¤šé…ç½®æ–‡ä»¶ã€‚<br><code>rpm -ql containers-common | grep -v &quot;/usr/share/man/&quot;</code> å¯ä»¥æŸ¥çœ‹å…·ä½“çš„æ–‡ä»¶ä¿¡æ¯ã€‚</p><h4 id="registries-conf"><a href="#registries-conf" class="headerlink" title="registries.conf"></a>registries.conf</h4><p><code>/etc/containers/registries.conf</code> ç”¨äºä¿å­˜ registries ç›¸å…³é…ç½®ï¼š</p><h4 id="mounts-conf"><a href="#mounts-conf" class="headerlink" title="mounts.conf"></a>mounts.conf</h4><p>è¿™ä¸ªé…ç½®æŒ‡å®šåœ¨æ‰§è¡Œ podman run æˆ–è€… podman build å‘½ä»¤æ—¶è‡ªåŠ¨æŒ‚è½½çš„è·¯å¾„ï¼Œè¯¥è·¯å¾„åªä¼šåœ¨å®¹å™¨è¿è¡Œæ—¶æŒ‚è½½ï¼Œä¸ä¼šæäº¤åˆ°å®¹å™¨é•œåƒä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /usr/share/containers/mounts.conf</span></span><br><span class="line">/usr/share/rhel/secrets:/run/secrets</span><br></pre></td></tr></table></figure><h4 id="policy-json"><a href="#policy-json" class="headerlink" title="policy.json"></a>policy.json</h4><p>è¯ä¹¦ç›¸å…³çš„é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/containers/policy.json</span></span><br><span class="line">&#123;</span><br><span class="line">    "default": [</span><br><span class="line">        &#123;</span><br><span class="line">            "type": "insecureAcceptAnything"</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    "transports":</span><br><span class="line">        &#123;</span><br><span class="line">            "docker-daemon":</span><br><span class="line">                &#123;</span><br><span class="line">                    "": [&#123;"type":"insecureAcceptAnything"&#125;]</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="imagesä½¿ç”¨"><a href="#imagesä½¿ç”¨" class="headerlink" title="imagesä½¿ç”¨"></a>imagesä½¿ç”¨</h3><blockquote><p>Ps:ä»¥ä¸‹æ“ä½œå·²ç»ä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥ç§‘å­¦ä¸Šç½‘ï¼Œç»ˆç«¯å·²ç»<code>export https_proxy</code><br>PPs: æˆ‘ä¿®æ”¹äº†ä¸‹ä»“åº“ï¼Œå¦‚ä¸‹</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat  /etc/containers/registries.conf</span></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»…ä»…æ”¹äº†ä¸‹é¢éƒ¨åˆ†</span></span><br><span class="line">[registries.search]</span><br><span class="line"><span class="meta">#</span><span class="bash">registries = [<span class="string">'registry.access.redhat.com'</span>, <span class="string">'registry.fedoraproject.org'</span>, <span class="string">'registry.centos.org'</span>, <span class="string">'docker.io'</span>]</span></span><br><span class="line">registries = ['registry.redhat.io','quay.io','docker.io','registry.access.redhat.com']</span><br><span class="line"></span><br><span class="line">......</span><br></pre></td></tr></table></figure><h4 id="æœç´¢é•œåƒ"><a href="#æœç´¢é•œåƒ" class="headerlink" title="æœç´¢é•œåƒ"></a>æœç´¢é•œåƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ podman search nginx | head -6</span><br><span class="line">INDEX        NAME                                                                   DESCRIPTION                                       STARS   OFFICIAL   AUTOMATED</span><br><span class="line">redhat.io    registry.redhat.io&#x2F;rhscl&#x2F;nginx-112-rhel7                               Nginx is a web server and a reverse proxy se...   0</span><br><span class="line">redhat.io    registry.redhat.io&#x2F;rhel8&#x2F;nginx-116                                     Platform for running nginx 1.16 or building ...   0</span><br><span class="line">redhat.io    registry.redhat.io&#x2F;rhel8&#x2F;nginx-114                                     Nginx is a web server and a reverse proxy se...   0</span><br><span class="line">redhat.io    registry.redhat.io&#x2F;rhscl&#x2F;nginx-18-rhel7                                Nginx 1.8 server and a reverse proxy server       0</span><br><span class="line">redhat.io    registry.redhat.io&#x2F;rhscl&#x2F;nginx-110-rhel7                               Nginx container image that delivers an nginx...   0</span><br></pre></td></tr></table></figure><h4 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p $HOME&#x2F;padmon&#x2F;hello</span><br><span class="line">$ cd $HOME&#x2F;podman&#x2F;hello</span><br><span class="line">$ cat Dockerfile</span><br><span class="line">FROM docker.io&#x2F;library&#x2F;ubuntu:latest</span><br><span class="line"></span><br><span class="line">RUN echo &#39;hello&#39;</span><br><span class="line"># ç¬¬ä¸€æ¬¡æ„å»ºå‡ºé”™ </span><br><span class="line">podman build -t hello:1.0 .</span><br><span class="line">STEP 1: FROM docker.io&#x2F;library&#x2F;ubuntu:latest</span><br><span class="line">Getting image source signatures</span><br><span class="line">Copying blob fee5db0ff82f done</span><br><span class="line">Copying blob fc878cd0a91c done</span><br><span class="line">Copying blob d51af753c3d3 done</span><br><span class="line">Copying blob 6154df8ff988 done</span><br><span class="line">Error: error creating build container: Error writing blob: error storing blob to file &quot;&#x2F;var&#x2F;tmp&#x2F;storage169362295&#x2F;3&quot;: unexpected EOF</span><br><span class="line"># æˆ‘å•¥éƒ½æ²¡å¹²ï¼Œé‡æ–°è¯•äº†ä¸€ä¸‹</span><br><span class="line">$ podman build -t hello:1.0 .</span><br><span class="line">STEP 1: FROM docker.io&#x2F;library&#x2F;ubuntu:latest</span><br><span class="line">Getting image source signatures</span><br><span class="line">Copying blob 6154df8ff988 done</span><br><span class="line">Copying blob d51af753c3d3 done</span><br><span class="line">Copying blob fee5db0ff82f done</span><br><span class="line">Copying blob fc878cd0a91c done</span><br><span class="line">Copying config 1d622ef86b done</span><br><span class="line">Writing manifest to image destination</span><br><span class="line">Storing signatures</span><br><span class="line">STEP 2: RUN echo &#39;hello&#39;</span><br><span class="line">hello</span><br><span class="line">STEP 3: COMMIT hello:1.0</span><br><span class="line">58013a9566306982c614d34f74ba6c658182a640e4fd31bd9a69698791b2f782</span><br><span class="line">$ podman images</span><br><span class="line">REPOSITORY                 TAG      IMAGE ID       CREATED              SIZE</span><br><span class="line">localhost&#x2F;hello            1.0      58013a956630   About a minute ago   76.3 MB</span><br><span class="line">docker.io&#x2F;library&#x2F;ubuntu   latest   1d622ef86b13   10 days ago          76.3 MB</span><br></pre></td></tr></table></figure><h4 id="æ‹‰å–"><a href="#æ‹‰å–" class="headerlink" title="æ‹‰å–"></a>æ‹‰å–</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">podman image pull nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">å‰ä¸¤æ¬¡å¤±è´¥ï¼Œå•¥ä¹Ÿæ²¡å¹²ï¼Œç¬¬ä¸‰æ¬¡æˆåŠŸ å¤±è´¥çš„åŸå› æ˜¯unexpected EOF</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»githubçš„issueä¸Šæ¥çœ‹æ˜¾ç„¶ä¸æ˜¯æˆ‘ä¸€ä¸ªäººäººå“ä¸è¡Œ,å¤šå°è¯•å‡ æ¬¡ï¼Œæœ‰æ—¶å€™ä¼šæˆåŠŸã€‚</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman images</span></span><br><span class="line">REPOSITORY                 TAG      IMAGE ID       CREATED         SIZE</span><br><span class="line">localhost/hello            1.0      58013a956630   9 minutes ago   76.3 MB</span><br><span class="line">docker.io/library/ubuntu   latest   1d622ef86b13   10 days ago     76.3 MB</span><br><span class="line">docker.io/library/nginx    latest   602e111c06b6   11 days ago     131 MB</span><br></pre></td></tr></table></figure><p>é™¤äº†åƒ Docker ä¸€æ ·ä»ç½‘ç»œæ‹‰å–é•œåƒï¼ŒPodman ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ä» Docker è¿ç§»è¿‡æ¥ï¼ŒPodman æ”¯æŒä»æœ¬åœ°çš„ docker daemon ä¸­ç›´æ¥æ‹‰å–é•œåƒï¼Œå¦‚æœæ²¡æœ‰ domain çš„è¯ï¼Œç›®å‰ä¼šè‡ªåŠ¨è¡¥å…¨ docker.io/library/ å‰ç¼€ã€‚</p><h4 id="æ£€æŸ¥å’Œåˆ é™¤"><a href="#æ£€æŸ¥å’Œåˆ é™¤" class="headerlink" title="æ£€æŸ¥å’Œåˆ é™¤"></a>æ£€æŸ¥å’Œåˆ é™¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ podman image inspect docker.io&#x2F;library&#x2F;nginx |head -n 15</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;602e111c06b6934013578ad80554a074049c59441d9bcd963cb4a7feccede7a5&quot;,</span><br><span class="line">        &quot;Digest&quot;: &quot;sha256:86ae264c3f4acb99b2dee4d0098c40cb8c46dcf9e1148f05d3a51c4df6758c12&quot;,</span><br><span class="line">        &quot;RepoTags&quot;: [</span><br><span class="line">            &quot;docker.io&#x2F;library&#x2F;nginx:latest&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;RepoDigests&quot;: [</span><br><span class="line">            &quot;docker.io&#x2F;library&#x2F;nginx@sha256:86ae264c3f4acb99b2dee4d0098c40cb8c46dcf9e1148f05d3a51c4df6758c12&quot;,</span><br><span class="line">            &quot;docker.io&#x2F;library&#x2F;nginx@sha256:cccef6d6bdea671c394956e24b0d0c44cd82dbe83f543a47fdc790fadea48422&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;Parent&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Comment&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2020-04-23T13:03:01.355887897Z&quot;,</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">        </span><br><span class="line">$ podman image rm docker.io&#x2F;library&#x2F;nginx</span><br><span class="line">Untagged: docker.io&#x2F;library&#x2F;nginx:latest</span><br><span class="line">Deleted: 602e111c06b6934013578ad80554a074049c59441d9bcd963cb4a7feccede7a5</span><br><span class="line"></span><br><span class="line">$ podman images</span><br><span class="line">REPOSITORY                 TAG      IMAGE ID       CREATED          SIZE</span><br><span class="line">localhost&#x2F;hello            1.0      58013a956630   11 minutes ago   76.3 MB</span><br><span class="line">docker.io&#x2F;library&#x2F;ubuntu   latest   1d622ef86b13   10 days ago      76.3 MB</span><br></pre></td></tr></table></figure><h3 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h3><h4 id="è¿è¡Œ-åœæ­¢å’Œåˆ é™¤"><a href="#è¿è¡Œ-åœæ­¢å’Œåˆ é™¤" class="headerlink" title="è¿è¡Œ,åœæ­¢å’Œåˆ é™¤"></a>è¿è¡Œ,åœæ­¢å’Œåˆ é™¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> podman images</span></span><br><span class="line">REPOSITORY                 TAG      IMAGE ID       CREATED          SIZE</span><br><span class="line">localhost/hello            1.0      58013a956630   13 minutes ago   76.3 MB</span><br><span class="line">docker.io/library/ubuntu   latest   1d622ef86b13   10 days ago      76.3 MB</span><br><span class="line">docker.io/library/nginx    latest   602e111c06b6   11 days ago      131 MB</span><br><span class="line"><span class="meta">$</span><span class="bash"> podman run -it docker.io/library/ubuntu sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cat /etc/issue</span></span><br><span class="line">Ubuntu 20.04 LTS \n \l</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">exit</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman ps -a</span></span><br><span class="line">CONTAINER ID  IMAGE                            COMMAND  CREATED        STATUS                         PORTS  NAMES</span><br><span class="line">6e20cab0d0dc  docker.io/library/ubuntu:latest  sh       2 minutes ago  Exited (0) About a minute ago         gallant_wright</span><br><span class="line"><span class="meta">$</span><span class="bash"> podman ps</span></span><br><span class="line">CONTAINER ID  IMAGE                            COMMAND  CREATED        STATUS            PORTS  NAMES</span><br><span class="line">4dffd4d2a97d  docker.io/library/ubuntu:latest  sh       3 seconds ago  Up 3 seconds ago         modest_dewdney</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman stop 4dffd4d2a97d</span></span><br><span class="line">4dffd4d2a97d079de9b777813b379fee66ed3b38b889545f764500032aefb1ec</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman rm 4dffd4d2a97d 6e20cab0d0dc</span></span><br><span class="line">4dffd4d2a97d079de9b777813b379fee66ed3b38b889545f764500032aefb1ec</span><br><span class="line">6e20cab0d0dc2007c51dc84fd2b3bd00caea2aa514b0e4f417646ba525ad5b16</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman ps -a</span></span><br><span class="line">CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES</span><br></pre></td></tr></table></figure><h3 id="checkpoint-restore"><a href="#checkpoint-restore" class="headerlink" title="checkpoint/restore"></a>checkpoint/restore</h3><p>Podman æä¾›äº†ç±»ä¼¼äº git çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿå¯¹ container è¿›è¡Œ checkpoint(commit)ï¼Œå¹¶ä¸”å¯ä»¥ restore(checkout)ï¼Œ<a href="https://asciinema.org/a/FsTbx9mZkzeuhCM2pFOr1tujM" target="_blank" rel="noopener">çœ‹ç€å¾ˆç¾å¥½çš„æ ·å­</a>ï¼Œæˆ‘åˆ°è¿™é‡Œå·²ç»ä¸æ˜¯å¾ˆæƒ³éªŒè¯äº†ï¼Œæ¯•ç«Ÿæ„å»ºæˆ–è€…æ‹‰å–è¿™æ ·åŸºç¡€çš„æ“ä½œéƒ½è¦é äººå“ï¼Œè¿˜æ˜¯ç­‰å­å¼¹å…ˆé£ä¸€ä¼šå„¿å†è¯´ã€‚</p><h3 id="å¥åº·æ£€æŸ¥"><a href="#å¥åº·æ£€æŸ¥" class="headerlink" title="å¥åº·æ£€æŸ¥"></a>å¥åº·æ£€æŸ¥</h3><p>podmanæä¾›äº†healthcheckåŠŸèƒ½ï¼Œåœ¨è¿è¡Œå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡å‚æ•°<code>--healthcheck-command</code>æ¥æŒ‡å®šå¥åº·æ£€æŸ¥çš„æ–¹å¼ï¼Œç„¶åé€šè¿‡<code>podman healthcheck</code>å‘½ä»¤æ¥æ£€æµ‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ podman run -dt --name healthtest --healthcheck-command &#39;CMD-SHELL curl https:&#x2F;&#x2F;www.baidu.com || exit 1&#39; --healthcheck-interval&#x3D;0 nginx:latest</span><br><span class="line">b3fa86705f2acfb59bcaa8bbed0a531e6fa17092593768a66bec56ba98623550</span><br><span class="line">$ podman healthcheck run healthtest</span><br><span class="line">unhealthy</span><br></pre></td></tr></table></figure><p>æˆ‘åˆ°ç°åœ¨æ²¡æ˜ç™½æˆ‘è¿è¡Œå®¹å™¨ä¸å¥åº·çš„åŸå› ï¼Œæˆ‘çœ‹äº†ä¸€å †issueï¼Œè²Œä¼¼å„ç§è¯´æ³•ä¸ä¸€ï¼Œæ²¡æœ‰å†æ·±ç©¶ä¸‹å»ã€‚</p><h3 id="systemd"><a href="#systemd" class="headerlink" title="systemd"></a>systemd</h3><p>Podmanæ²¡æœ‰daemonï¼Œæ²¡åŠæ³•åƒdockerä¸€æ ·é€šè¿‡æŒ‡å®šå‚æ•°<code>--restart=always</code>åœ¨dockerè¿›ç¨‹å¯åŠ¨æ—¶è‡ªåŠ¨æ‹‰èµ·é•œåƒã€‚ è€Œé‡‡ç”¨systemdæ¥æ”¯æŒè¯¥åŠŸèƒ½ã€‚</p><p>åˆ°è¿™é‡Œæˆ‘å·²ç»æ— åŠ›åæ§½ï¼Œå®Œå…¨æ²¡æœ‰å†å®éªŒçš„åŠ¨åŠ›äº†ï¼Œæš‚æ—¶å…ˆç©ºç€å§ï¼Œæˆ–è®¸ä»¥åæœ‰æœºä¼šæˆ‘åˆä¼šå˜å¿ƒå–œæ¬¢ä¹Ÿæœ‰å¯èƒ½å‘¢ï¼Œåˆ°æ—¶å€™å†ç ”ç©¶è¿™ä¸ªæ€ä¹ˆç©ã€‚</p><h3 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h3><p>æ€»å¾—å¯¹å¾—èµ·åå­—å•Šï¼Œä¸»è¦ä¸å°±æ˜¯ä¸ºäº†å¹k8s podæ¦‚å¿µå˜›ï¼ˆï¼š æ ¹æ®podmanè‡ªå·±çš„ç›®æ ‡å’Œè¯´æ³•ï¼Œå¯¹äºæœ€ç»ˆè¦è¿è¡Œåœ¨k8sç¯å¢ƒçš„æ¥è¯´ï¼ŒPodmanéå¸¸é€‚åˆï¼Œèƒ½å¾ˆå¤§çš„å‡å°‘ç¯å¢ƒä¸é€šå¯¼è‡´çš„å·¥ä½œé‡ï¼ŒPodmançš„YAMLå’Œk8s pod yamlæ–‡ä»¶æ ¼å¼æ˜¯å…¼å®¹çš„ã€‚</p><p><img data-src="https://images.yangfan16.cn/podman-pod.jpeg" alt="podman podæ¶æ„"></p><h4 id="å…ˆåˆ›å»ºä¸€ä¸ªpod"><a href="#å…ˆåˆ›å»ºä¸€ä¸ªpod" class="headerlink" title="å…ˆåˆ›å»ºä¸€ä¸ªpod"></a>å…ˆåˆ›å»ºä¸€ä¸ªpod</h4><p>ç…ç…å¸®åŠ©å‘½ä»¤ï¼Œ åŸºæœ¬ä¸Šæƒ³è¦çš„éƒ½è¿˜æœ‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> podman pod --<span class="built_in">help</span></span></span><br><span class="line">Manage pods</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line">  Pods are a group of one or more containers sharing the same network, pid and ipc namespaces.</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  podman pod [command]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  create      Create a new empty pod</span><br><span class="line">  exists      Check if a pod exists in local storage</span><br><span class="line">  inspect     Displays a pod configuration</span><br><span class="line">  kill        Send the specified signal or SIGKILL to containers in pod</span><br><span class="line">  pause       Pause one or more pods</span><br><span class="line">  prune       Remove all stopped pods</span><br><span class="line">  ps          List pods</span><br><span class="line">  restart     Restart one or more pods</span><br><span class="line">  rm          Remove one or more pods</span><br><span class="line">  start       Start one or more pods</span><br><span class="line">  stats       Display a live stream of resource usage statistics for the containers in one or more pods</span><br><span class="line">  stop        Stop one or more pods</span><br><span class="line">  top         Display the running processes of containers in a pod</span><br><span class="line">  unpause     Unpause one or more pods</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman pod create --<span class="built_in">help</span></span></span><br><span class="line">Create a new empty pod</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line">  After creating the pod, the pod ID is printed to stdout.</span><br><span class="line"></span><br><span class="line">  You can then start it at any time with the  podman pod start &lt;pod_id&gt; command. The pod will be created with the initial state 'created'.</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  podman pod create [flags]</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">      --cgroup-parent string   Set parent cgroup for the pod</span><br><span class="line">      --hostname string        Set a hostname to the pod</span><br><span class="line">      --infra                  Create an infra container associated with the pod to share namespaces with (default true)</span><br><span class="line">      --infra-command string   The command to run on the infra container when the pod is started (default "/pause")</span><br><span class="line">      --infra-image string     The image of the infra container to associate with the pod (default "k8s.gcr.io/pause:3.1")</span><br><span class="line">  -l, --label strings          Set metadata on pod (default [])</span><br><span class="line">      --label-file strings     Read in a line delimited file of labels</span><br><span class="line">  -n, --name string            Assign a name to the pod</span><br><span class="line">      --pod-id-file string     Write the pod ID to the file</span><br><span class="line">  -p, --publish strings        Publish a container's port, or a range of ports, to the host (default [])</span><br><span class="line">      --share string           A comma delimited list of kernel namespaces the pod will share (default "cgroup,ipc,net,uts")</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªpod, ç”±äºé‡æ–°æ‰“å¼€äº†ç»ˆç«¯çª—å£å¤±å»äº†ç§‘å­¦ä¸Šç½‘çš„proxy,ç¬¬ä¸€æ¬¡timeoutäº†ï¼Œä¸€é¡¿æ“ä½œååˆ›å»ºæˆåŠŸäº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> podman pod create --name test_stack</span></span><br><span class="line">217143af2d6a44fe4fee99263d01bf26ca6cf287e62b4d3807fa968daea8ef7f</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman run -dt --pod new:web_server -p 8080:80 nginx</span></span><br><span class="line">e6336a56d0f217adb9938142fd0e1d98dd4b733140b7c88f4825359c096c4d3a</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman pod list</span></span><br><span class="line">POD ID         NAME         STATUS    CREATED          # OF CONTAINERS   INFRA ID</span><br><span class="line">01e985f62511   web_server   Running   7 seconds ago    2                 ae0341aac4c7</span><br><span class="line">9474f961f6e9   test_stack   Created   50 seconds ago   1                 ce0c41bf1c79</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> podman pod ps</span></span><br><span class="line">POD ID         NAME         STATUS    CREATED         # OF CONTAINERS   INFRA ID</span><br><span class="line">01e985f62511   web_server   Running   2 minutes ago   2                 ae0341aac4c7</span><br><span class="line">9474f961f6e9   test_stack   Created   2 minutes ago   1                 ce0c41bf1c79</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> curl localhost -I</span></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Length: 612</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Date: Mon, 04 May 2020 13:43:33 GMT</span><br><span class="line">Etag: "5e95c66e-264"</span><br><span class="line">Keep-Alive: timeout=4</span><br><span class="line">Last-Modified: Tue, 14 Apr 2020 14:19:26 GMT</span><br><span class="line">Proxy-Connection: keep-alive</span><br><span class="line">Server: nginx/1.17.10</span><br></pre></td></tr></table></figure><p>åˆ›å»ºäº†ä¸¤ä¸ªpodèŠ‚ç‚¹ï¼Œweb_serverè¿™ä¸ªpodä¸­æœ‰ä¸€ä¸ªå®¹å™¨nginxï¼Œå¹¶ä¸”æš´éœ²ç«¯å£ç»™å¤–é¢ï¼Œé€šè¿‡curlå¯ä»¥å¾ˆè½»æ˜“çš„éªŒè¯æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚ä¹Ÿå¯ä»¥æ£€æŸ¥æ ¹æ®ç«¯å£æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹åœ¨ä½¿ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ss -tplun | grep 80</span></span><br><span class="line">tcp   LISTEN  0       1                    0.0.0.0:80           0.0.0.0:*      users:(("slirp4netns",pid=28816,fd=8))</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å‘çˆ¹æ˜¯çš„æˆ‘stopè¿™ä¸ªpodï¼Œæƒ³è¦å†æ¬¡èµ·æ¥å´å§‹ç»ˆæ— æ³•èµ·æ¥ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> podman pod start web_server</span></span><br><span class="line">ERRO[0000] "error starting some containers: container already exists"</span><br><span class="line">ERRO[0000] "error from slirp4netns while setting up port redirection: map[desc:bad request: add_hostfwd: slirp_add_hostfwd failed]"</span><br><span class="line">Error: a dependency of container e6336a56d0f217adb9938142fd0e1d98dd4b733140b7c88f4825359c096c4d3a failed to start: container state improper</span><br></pre></td></tr></table></figure><p>emmmm,æˆ‘ç†è§£æ–°ä¸œè¥¿å‘å¤šç‚¹ï¼Œä½†è¿™ä¸ªçœŸçš„ä¸æ˜¯å¾ˆå¥½ç”¨å•Šã€‚ä¸€å¼€å§‹è¿˜æœ‰ç»™æissueçš„æƒ³æ³•ï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰ä¸€ç‚¹æ„æ„¿åšè¿™ä»¶äº‹ï¼Œè€Œä¸”åœ¨è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œèƒ½çœ‹åˆ°ä¸å°‘issueå’Œæˆ‘é‡åˆ°çš„æ˜¯ç›¸åŒçš„é—®é¢˜ï¼Œéƒ½è¢«ç²—æš´çš„å…³é—­äº†ã€‚</p><h3 id="k8sè”åŠ¨"><a href="#k8sè”åŠ¨" class="headerlink" title="k8sè”åŠ¨"></a>k8sè”åŠ¨</h3><p>é€šè¿‡<code>podman generate</code>å‘½ä»¤å¯ä»¥ç”Ÿæˆk8så¯ç”¨çš„YAMLæ–‡ä»¶ï¼Œä½¿ç”¨<code>podman play</code>å‘½ä»¤å¯ä»¥ç›´æ¥åˆ›å»ºå®Œæ•´çš„ Pod åŠå…¶æ‰€æ‹¥æœ‰çš„å®¹å™¨ã€‚ ä½†æ˜¯è¿™ä¸ªè¿˜æ˜¯é‡åˆ°äº†ä¸€ä¸ª<code>no matching entries in passwd file</code>ã€‚ æˆ‘æ²¡æœ‰ç»§ç»­å°è¯•ä¸‹å»çš„å‹‡æ°”ğŸ˜”</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¦‚æœä»Dockerè¿ç§»è¿‡æ¥ï¼Œä¼°è®¡å¤§åŠè¿˜æ˜¯è¦æŠ“ç‹‚ï¼š</p><ol><li>ç¼ºå°‘å›½å†…é•œåƒæºï¼Œæ²¡æœ‰ç§‘å­¦ä¸Šç½‘ï¼Œä»€ä¹ˆéƒ½åšä¸äº†ï¼Œå³ä½¿æœ‰ï¼Œä¹Ÿè¦çœ‹è¿æ°”ã€‚</li><li>è¯´å¥½äº†rootless, ä½†æ˜¯ä½ è¦æ˜¯æƒ³å¯¹ç«¯å£æ˜ å°„ï¼Œè¿˜æ˜¯å¾—è€è€å®å®çš„sudo,å¦åˆ™å°±æ˜¯å„ç§å„æ ·çš„é—®é¢˜ã€‚</li><li>å„ç§ä¸ç¨³å®šï¼Œç¼–è¯‘å¤±è´¥ï¼Œæ‹‰å–å¤±è´¥ï¼Œå¯åŠ¨podå¤±è´¥ï¼Œå…³é—­podå¤±è´¥ï¼Œå…³é”®æ˜¯å¾ˆå¤šé”™è¯¯æ ¹æœ¬å°±ä¸çŸ¥é“è‡ªå·±é”™åœ¨äº†å“ªé‡Œï¼Œè¿‡ä¸€ä¼šå„¿åˆä¼šæˆåŠŸã€‚</li><li>è¿˜éœ€è¦æ›´å¤šåœ°ç”¨æˆ·å»é‡‡å‘ï¼Œå»ä¿®å¤æ›´å¤šåœ°é—®é¢˜ã€‚</li><li>æ–‡æ¡£èµ„æºç¨€ç¼ºï¼Œå‡ ä¹å…¨æ˜¯è‹±æ–‡çš„ï¼Œè€Œä¸”éƒ½æ˜¯å¾ˆç®€å•çš„ç¤ºä¾‹ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½ç»å—çš„ç”Ÿäº§ç¯å¢ƒçš„å„ç§è€ƒéªŒã€‚</li></ol><p>æ€»ä½“æ¥è¯´ï¼Œç°åœ¨æ²¡æœ‰dockeré¦™ï¼Œä»¥åè¿”å›æ¥çœ‹å°±ä¸å¥½è¯´äº†ã€‚</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>æœ¬æ–‡ä½œè€…ï¼š</strong> é’æ¢…ç…®é©¬</li><li class="post-copyright-link"> <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://blog.yangfan16.cn/others/podman-experience/" title="Podman åˆä½“éªŒ">https://blog.yangfan16.cn/others/podman-experience/</a></li><li class="post-copyright-license"> <strong>ç‰ˆæƒå£°æ˜ï¼š</strong> æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/podman/" rel="tag"><i class="fa fa-tag"></i> podman</a></div><div class="post-widgets"><div class="wp_rating"><div id="wpac-rating"></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/docker/docker-images/" rel="prev" title="é‡å­¦Dockerä¹‹é•œåƒï¼ˆä¸€ï¼‰"><i class="fa fa-chevron-left"></i> é‡å­¦Dockerä¹‹é•œåƒï¼ˆä¸€ï¼‰</a></div><div class="post-nav-item"> <a href="/python/wechat-pics/" rel="next" title="Pythonçˆ¬å–å¾®ä¿¡å…¬ä¼—å·ä¸Šçš„å›¾ç‰‡">Pythonçˆ¬å–å¾®ä¿¡å…¬ä¼—å·ä¸Šçš„å›¾ç‰‡<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview"> ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸ºå•¥ä¸ç”¨Docker"><span class="nav-number">1.</span> <span class="nav-text">ä¸ºå•¥ä¸ç”¨Docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#podmanç‰¹è‰²"><span class="nav-number">2.</span> <span class="nav-text">podmanç‰¹è‰²</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¼˜ç‚¹"><span class="nav-number">2.1.</span> <span class="nav-text">ä¼˜ç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç¼ºç‚¹"><span class="nav-number">2.2.</span> <span class="nav-text">ç¼ºç‚¹</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…"><span class="nav-number">3.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é…ç½®è¯´æ˜"><span class="nav-number">4.</span> <span class="nav-text">é…ç½®è¯´æ˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#podman-rpmä¸­é™„å¸¦çš„æ–‡ä»¶"><span class="nav-number">4.1.</span> <span class="nav-text">podman rpmä¸­é™„å¸¦çš„æ–‡ä»¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#registries-conf"><span class="nav-number">4.2.</span> <span class="nav-text">registries.conf</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mounts-conf"><span class="nav-number">4.3.</span> <span class="nav-text">mounts.conf</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#policy-json"><span class="nav-number">4.4.</span> <span class="nav-text">policy.json</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#imagesä½¿ç”¨"><span class="nav-number">5.</span> <span class="nav-text">imagesä½¿ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æœç´¢é•œåƒ"><span class="nav-number">5.1.</span> <span class="nav-text">æœç´¢é•œåƒ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ„å»ºé•œåƒ"><span class="nav-number">5.2.</span> <span class="nav-text">æ„å»ºé•œåƒ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ‹‰å–"><span class="nav-number">5.3.</span> <span class="nav-text">æ‹‰å–</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ£€æŸ¥å’Œåˆ é™¤"><span class="nav-number">5.4.</span> <span class="nav-text">æ£€æŸ¥å’Œåˆ é™¤</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®¹å™¨"><span class="nav-number">6.</span> <span class="nav-text">å®¹å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#è¿è¡Œ-åœæ­¢å’Œåˆ é™¤"><span class="nav-number">6.1.</span> <span class="nav-text">è¿è¡Œ,åœæ­¢å’Œåˆ é™¤</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#checkpoint-restore"><span class="nav-number">7.</span> <span class="nav-text">checkpoint&#x2F;restore</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¥åº·æ£€æŸ¥"><span class="nav-number">8.</span> <span class="nav-text">å¥åº·æ£€æŸ¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#systemd"><span class="nav-number">9.</span> <span class="nav-text">systemd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pod"><span class="nav-number">10.</span> <span class="nav-text">Pod</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å…ˆåˆ›å»ºä¸€ä¸ªpod"><span class="nav-number">10.1.</span> <span class="nav-text">å…ˆåˆ›å»ºä¸€ä¸ªpod</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#k8sè”åŠ¨"><span class="nav-number">11.</span> <span class="nav-text">k8sè”åŠ¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">12.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="é’æ¢…ç…®é©¬" src="/uploads/avatar.png"><p class="site-author-name" itemprop="name">é’æ¢…ç…®é©¬</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">13</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"> <span class="site-state-item-count">6</span> <span class="site-state-item-name">åˆ†ç±»</span></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">8</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/yangfan16" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;yangfan16" rel="noopener" target="_blank"><i class="github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:yangfan9915@gmail.com" title="E-Mail â†’ mailto:yangfan9915@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://weibo.com/52012536" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;52012536" rel="noopener" target="_blank"><i class="weibo fa-fw"></i> Weibo</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="link fa-fw"></i> å¤§ä½¬åšå®¢é“¾æ¥</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://think2011.net/" title="https:&#x2F;&#x2F;think2011.net&#x2F;" rel="noopener" target="_blank">æ›¾æµ©çš„åšå®¢</a></li><li class="links-of-blogroll-item"> <a href="https://ninghao.net/blog" title="https:&#x2F;&#x2F;ninghao.net&#x2F;blog" rel="noopener" target="_blank">ç‹çš“çš„åšå®¢</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">äº¬ICPå¤‡17005352å·-2</a> <img src="/uploads/beian.png" style="display:inline-block"></div><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">é’æ¢…ç…®é©¬</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-chart-area"></i></span> <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span> <span title="ç«™ç‚¹æ€»å­—æ•°">88k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span> <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">1:20</span></div><div class="addthis_inline_share_toolbox"><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e79f11b160a4070" async="async"></script></div></div></footer></div><script size="200" alpha="0.4" zindex="-1" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-ribbon@1/canvas-ribbon.js"></script><script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/lozad.js/1.14.0/lozad.min.js"></script><script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script><script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script><script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script><script data-pjax>CONFIG.page.isPost&&(wpac_init=window.wpac_init||[],wpac_init.push({widget:"Rating",id:10254,el:"wpac-rating",color:"fc6423"}),function(){if(!("WIDGETPACK_LOADED"in window)){WIDGETPACK_LOADED=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//embed.widgetpack.com/widget.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t.nextSibling)}}())</script><div id="pjax"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'f9f42cb27214f7d10b14',
      clientSecret: '147d85755db76790cff0442b7f5123e0032cba08',
      repo        : 'gitalk',
      owner       : 'yangfan16',
      admin       : ['yangfan16'],
      id          : 'b15446cc7baf03d2e349b32ca1893735',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></div></body></html>